<!DOCTYPE html>
<html>
<head>
    <title>Karaoke</title>
</head>
<body style="padding: 10px">
    <h1 id="title">Karaoke</h1>
    <div style="display:flex; gap:50px" id="container">
        <input id="name-field" placeholder="Nombre"/>
        <button onclick="register()">Registrarse</button>
    </div>
    <div id="status" style="margin-top: 20px;"></div>
</body>
<script>
const url = window.location.host;
async function register() {
    try {
        let name = document.getElementById("name-field").value;
        let data = { "name": name }
        const response = await fetch("/register", {
            "method": "POST",
            "headers": {
                "Content-Type": "application/json",
            },
            "body": JSON.stringify(data)
        });
        const responseData = await response.json();
        if (response.ok) {
            document.getElementById("status").innerHTML = `<p style="color: green;">Te registraste exitosamente</p>`;
            window.location.reload();
        } else {
            document.getElementById("status").innerHTML = `<p style="color: red;">Error: ${responseData.error}</p>`;
        }
    } catch (error) {
        document.getElementById("status").innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
    }
}
</script>
</html>
